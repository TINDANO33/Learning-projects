<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Récupération de Numéro de Téléphone</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .phone-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        select, input, button {
            padding: 10px;
            font-size: 16px;
        }

        input[type="tel"] {
            width: 200px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

<div class="phone-input">
    <select aria-label="select" id="country-select">
        <option value="+226" data-country="Burkina Faso">Burkina Faso (+226)</option>
        <option value="+1" data-country="USA">USA (+1)</option>
        <option value="+33" data-country="France">France (+33)</option>
        <option value="+44" data-country="UK">UK (+44)</option>
        <!-- Ajoutez d'autres pays ici -->
    </select>
    <input type="tel" id="phone-input" placeholder="Saisir le numéro de téléphone" required>
    <button id="submit-btn" type="button">Valider</button>
</div>

<script>
    const countrySelect = document.getElementById('country-select');
    const phoneInput = document.getElementById('phone-input');
    const submitBtn = document.getElementById('submit-btn');

    // Fonction pour nettoyer le numéro de téléphone en supprimant les espaces et les tirets
    function cleanPhoneNumber(phoneNumber) {
        return phoneNumber.replace(/[\s-]/g, '');
    }

    // Quand un pays est sélectionné, mettre à jour l'input avec le code du pays
    countrySelect.addEventListener('change', function() {
        const code = this.value;
        phoneInput.value = code + ' ' + cleanPhoneNumber(phoneInput.value.replace(/^\+\d+/, ''));
    });

    // Quand l'utilisateur tape un code de pays, sélectionner automatiquement le pays correspondant
    phoneInput.addEventListener('input', function() {
        const cleanedValue = cleanPhoneNumber(this.value);
        const matchingOption = Array.from(countrySelect.options).find(option => cleanedValue.startsWith(option.value));
        if (matchingOption) {
            countrySelect.value = matchingOption.value;
        }
    });

    // Gestion du clic sur le bouton de validation
    submitBtn.addEventListener('click', function() {
        const cleanedPhoneValue = cleanPhoneNumber(phoneInput.value);
        if (/^\+\d{1,3}\d{4,14}$/.test(cleanedPhoneValue)) {
            alert('Numéro valide : ' + cleanedPhoneValue);
        } else {
            alert('Veuillez entrer un numéro de téléphone valide.');
        }
    });
</script>

</body>
</html>
